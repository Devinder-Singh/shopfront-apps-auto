

# SF Apps automation repo

This repo serves primarily to automate the ui for Shopfront Apps on android and ios. There is also a template for other divisions to start implementing their own app automation


### Features:

- apps_auto for shopfront apps android and ios

- custom Takealot library TalLibrary for app automation

- Automation template for other devisions




### Getting started

Apps automation setup wiki: https://jira.takealot.com/wiki/display/TST/Apps+Automation+Setup+Robot+Framework+and+Appium


### Send Stats to Graphite

We have a graphite listener implemented for the sole purpose of sending stats to graphite after each and every test run.

The listener can be taken into use by using the `--listener` command line option so that the actual listener can be passed as an argument.

i.e. `robot --listener listeners/graphite_listener/GraphiteListener.py apps_auto/Tests_Critical`

To read more on the Listener Interface, check out [listeners](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#listener-interface)

#### Pre-requisites for listener
In order for the listener to perform as intended there are several environment variables that need to be set.
Before using the listener ensure to set these environment variables:
`ROLE=test` - required by BaseTestFramework package (contains graphite utilities)
`TEAM_NAME=<team-name>` - an optional team name, if not set, will default to `shopfront_auto`
`APP_ENVIRONMENT` - The api environment, set inside the test framework
`PLATFORM_NAME` - The platform name (i.e. android, ios)

#### Finding metrics in Grafana
The metrics will be sent to graphite and there we can use the metrics to plot graphs in grafana
The format of the metrics generated by the listener will be 
`<required-prefix>.team_name.environment.platform.test_tag.status`
where:
`<required-prefix>` - Required as a way to standardise metrics sent to graphite, usually in format `application.head_office.staging.master`
`environment`- the environment the test is running in (prod, staging etc)
`platform` - the platform the tests are running on (android, ios)
`test_tag` - the first tag in test case tags
`status` - the status of the test case run i.e. pass, fail, skip


